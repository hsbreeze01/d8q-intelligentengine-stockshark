# 股票分析系统需求文档

## 1. Overview
本股票分析系统旨在提供股票分析、主题行业股票筛选和场景驱动股票关联分析功能，帮助用户做出更明智的投资决策。系统将使用akshare获取股票数据，并优先通过context7参考API数据。

## 2. User Stories

### 2.1 Epic: 单股票分析
- **Story**: 作为投资者，我希望能够对单个股票按照设定的规则进行分析，得到投资价值和风险评估，以便做出投资决策。
- **Acceptance Criteria**:
  - 能够输入股票代码或名称查询单个股票
  - 能够设定自定义分析规则（如估值指标、技术指标等）
  - 系统能够基于规则分析股票并给出投资价值评分
  - 系统能够分析并展示股票的风险因素
  - 分析结果以直观的方式呈现（如评分、图表、文字说明等）

### 2.2 Epic: 主题/行业股票筛选
- **Story**: 作为投资者，我希望能够基于主题或行业查找相关股票，并按照指定规则进行筛选和排序，以便发现投资机会。
- **Acceptance Criteria**:
  - 能够按照主题（如AI、新能源等）查询相关股票
  - 能够按照行业分类查询相关股票
  - 能够设定筛选条件（如市值、PE、ROE等）
  - 能够按照指定规则排序（如涨幅、成交量、估值等）
  - 筛选结果包含股票基本信息和关键指标

### 2.3 Epic: 场景/新闻驱动股票分析
- **Story**: 作为投资者，我希望能够输入一个场景或新闻，获取相关联的股票信息，以便把握市场动态和投资机会。
- **Acceptance Criteria**:
  - 能够输入场景描述或新闻内容
  - 系统能够分析并提取关键实体（如公司名称、产品等）
  - 能够列举与关键实体相关联的供应链企业
  - 能够区分直接供应和间接供应关系
  - 能够标记企业是否上市
  - 能够标识非上市企业是否有上市企业参与控股
  - 结果以结构化方式呈现，包含企业关系和标签

## 3. Functional Requirements

### 3.1 单股票分析功能
- 股票基本信息查询
- 自定义分析规则设置
- 投资价值评估（包含估值、成长、财务等维度）
- 风险分析（包含市场风险、行业风险、公司特定风险等）
- 分析结果可视化展示

### 3.2 主题/行业股票筛选功能
- 主题/行业分类管理
- 多条件组合筛选
- 自定义排序规则
- 筛选结果导出

### 3.3 场景/新闻驱动股票分析功能
- 场景/新闻文本分析
- 实体识别与关联
- 供应链关系图谱构建
- 企业上市状态查询
- 股权结构分析
- 结果标签化展示

## 4. Non-Functional Requirements

### 4.1 性能
- 单股票分析响应时间：< 3秒
- 主题/行业筛选响应时间：< 5秒
- 场景分析响应时间：< 10秒

### 4.2 可用性
- 界面简洁直观，易于使用
- 支持常见浏览器（Chrome、Firefox、Safari等）
- 提供清晰的操作指引和帮助信息

### 4.3 可靠性
- 系统可用性：≥ 99.5%
- 数据准确性：≥ 99.9%
- 错误处理机制完善，提供友好的错误提示

### 4.4 安全性
- 数据传输加密
- 用户数据保护
- 访问控制机制

## 5. Data Requirements

### 5.1 数据源
- akshare：股票基本信息、行情数据、财务数据等
- context7：API数据参考
- 其他公开数据源：新闻、行业报告等

### 5.2 数据类型
- 股票基本信息（代码、名称、行业、上市时间等）
- 行情数据（价格、成交量、涨跌幅等）
- 财务数据（营收、利润、PE、ROE等）
- 公司治理数据（股权结构、管理层等）
- 新闻与事件数据
- 供应链关系数据

## 6. Constraints

### 6.1 技术约束
- 必须使用Python语言开发
- 数据获取优先使用akshare
- API数据优先参考context7
- 需遵循相关数据使用协议和法律法规

### 6.2 资源约束
- 初期部署在单机环境
- 数据存储使用本地数据库
- 后续可扩展到分布式架构

## 7. Dependencies

### 7.1 外部库
- akshare：股票数据获取
- pandas：数据处理
- numpy：数值计算
- context7：API参考
- 自然语言处理库：文本分析
- 可视化库：结果展示

### 7.2 数据依赖
- 股票交易所公开数据
- 公司财务报表
- 新闻媒体数据
- 供应链关系数据

### 7.3 系统依赖
- Python 3.8+
- 数据库系统
- Web框架（如Flask、Django等）